var expect = require('expect.js');
var dingFiletypes = require('../index');

describe('ding.filetypes', function() {

  describe('#getTypeByName',function(){
    it('should return the correct filetype', function() {
      expect(dingFiletypes.getTypeByName('xxx.xx.JPG')).to.be('jpg');
      expect(dingFiletypes.getTypeByName('xxx.mp4')).to.be('mp4');
    });
  })

  describe('#getIdByType',function(){
    it('should return the correct file type , if the file is support',function(){
      expect(dingFiletypes.getIdByType('mp4')).to.be('6');
    })
    it('should return 8 , it the file type is unknown',function(){
      expect(dingFiletypes.getIdByType('nonexist')).to.be('8');
    })
  })

  describe('#getCateTypeById',function(){
    it('should return corrent cateType if the id is be defined',function(){
      expect(dingFiletypes.getCateTypeById('80')).to.be('NORMAL_FILE');
    });
    it('should return NORMAL_FILR is the id is unknown',function(){
      expect(dingFiletypes.getCateTypeById('26')).to.be('VIDEO_MKV');
    });
  })

  describe('#getTypeById',function(){
    it('should return return correct file type by file type id',function(){
      expect(dingFiletypes.getTypeById('26')).to.be('mkv');
    });
    it('should return file if the id is unknown',function(){
      expect(dingFiletypes.getTypeById('80')).to.be('file');
    });
  })

  describe('#getCateTypeByType',function(){
    it('should return corrent cate type by type',function(){
      expect(dingFiletypes.getCateTypeByType('mp4')).to.be('VIDEO_MP4');
      expect(dingFiletypes.getCateTypeByType('png')).to.be('IMAGE_PNG');
    })
  })

  describe('#isValid',function(){
    it('should return true if the type is supported',function(){
      expect(dingFiletypes.isValid('docx')).to.be.ok();
      expect(dingFiletypes.isValid('xls')).to.be.ok();
    })
    it('should return false if the type is not supported',function(){
      expect(dingFiletypes.isValid('js')).to.not.be.ok();
      expect(dingFiletypes.isValid('css')).to.not.be.ok();
    })
  })

  describe('#isImg',function(){
    it('should return true if the type is image',function(){
      expect(dingFiletypes.isImg('png')).to.be.ok();
      expect(dingFiletypes.isImg('jpeg')).to.be.ok();
    })
    it('should return false if the type is not image',function(){
      expect(dingFiletypes.isImg('mp4')).to.not.be.ok();
      expect(dingFiletypes.isImg('doc')).to.not.be.ok();
    })
  });

  describe('#getFileIconByType',function(){
    it('should return correct icon by type',function(){
      expect(dingFiletypes.getFileIconByType('jpg')).to.be('pic-icon');
      expect(dingFiletypes.getFileIconByType('doc')).to.be('word-icon');
      expect(dingFiletypes.getFileIconByType('ppt')).to.be('ppt-icon');
    })
  })

});
