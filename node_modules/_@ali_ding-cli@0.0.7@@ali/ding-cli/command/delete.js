'use strict'

const co = require("co");
const prompt = require("co-prompt");
const config = require("../templates");
const chalk = require("chalk");
const fs = require("fs");
const path = require("path");

module.exports = () => {
	co(function *(){
		let tplName = yield prompt("请输入模板名称：");

		if(!tplName){
			console.log(chalk.red("模板名称不能为空"));
			process.exit();
		}

		config.tpl[tplName] = undefined;

		fs.writeFile(path.join(__dirname,"../templates.json"), JSON.stringify(config), "utf-8", (err) => {
			if(err){
				console.log(err);
			}

			console.log(chalk.green("模板删除成功"));
			process.exit();
		})
	})
}